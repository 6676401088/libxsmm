language: cpp

addons:
  apt:
    packages: 
    - gfortran
    - libblas-dev
    - liblapack-dev

compiler:
  - clang
  - gcc

script: 
 - make -e realclean
 - bash make.sh -ci -j
 - make -e samples
 - make -e test
 - cd samples/cp2k
 - bash test.sh
 - cd ../..

 - make -e realclean
 - make -e ALIGNED_STORES=1 JIT=1
 - bash make.sh -ci drytest
 - cd samples/cp2k
 - bash cp2k-perf.sh
 - bash test.sh
 - cd ../..

 - cd samples/nek
 - make -e stpm
 - make -e rstr
 - make -e axhm
